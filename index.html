<html>
    <head>
        
    </head>
    <body>
        <div id="location"></div>

        <script>
            (function() {
                var xhttp = new XMLHttpRequest();
                var key = "AIzaSyBjLRk0ipr2VNAdnmc15DlSKbHEsYWH-XQ";

                xhttp.onreadystatechange = function() {
                        var el = document.getElementById("location");

                    if (xhttp.readyState == 4 && xhttp.status == 200) {
                        var geolocation = JSON.parse(xhttp.responseText).location;
                        var loc = geolocation.lat + ',' + geolocation.lng;
                        el.innerHTML = '<a target="_blank" href="http://maps.google.com/maps/place/' + loc + '/@' + loc + ',10z/data=!3m1!1e3"><img src=https://maps.googleapis.com/maps/api/staticmap?zoom=16&size=700x400&maptype=roadmap&markers=color:red%7Clabel:C%7C' + loc + '></a>';
                        el.innerHTML += 'Geo Coordinates: ' + geolocation.lat + ', ' + geolocation.lng + '';

                        var xhttp2 = new XMLHttpRequest();
                        xhttp2.onreadystatechange = function() {
                            if (xhttp2.readyState == 4 && xhttp2.status == 200) {
                                var locationName = JSON.parse(xhttp2.responseText).results;
                                //console.log(locationName)
                                //el.innerHTML += 'Direcci√≥n de casa: ' + locationName[0].formatted_address;
                            }
                        };

                        xhttp2.open("POST", 'https://maps.googleapis.com/maps/api/geocode/json?latlng=' + geolocation.lat + ',' + geolocation.lng + '&sensor=true', true);
                        xhttp2.send();
                    }
                    if (xhttp.readyState == 4 && (xhttp.status == 403 || xhttp.status == 500)) {
                        el.innerHTML += 'La API no cargo';
                    }
                };

                xhttp.open("POST", "https://www.googleapis.com/geolocation/v1/geolocate?key=" + key, true);
                xhttp.send(); 
            }())
        </script>
    </body>
</html>